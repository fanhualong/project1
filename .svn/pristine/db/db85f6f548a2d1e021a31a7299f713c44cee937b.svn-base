<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<!doctype html>
<html>
<%@include file="/include/head.jsp" %>

<!--包括IE9以及IE9以下的--> 
<!--[if lte IE 9]>
  <style>
  	.select-wrap:after{
    	display:none;}
    .keshi-form select{
    padding-right:1px;}
  </style>
<![endif]-->

</head>

<body>
<header>
    <div id="header-wrap">
        <div id="header" class="header-neiye">
            <h1>华信智原教师签课时系统v1.0</h1>
        </div>
    </div>
</header>
<main id="main-wrap">
	<div id="container" class="clearfix neiye">
    	<div id="admin-wrap" class="fl">
            <div class="adminschool-title">
            	<nav>
                	<ul class="clearfix">
                    	<li><a href="/page/adminSchool.jsp">课程管理</a></li>
                        <li><a href="/page/adminClass.jsp">班级管理</a></li>
                        <li><a href="/page/adminRoom.jsp"  >教室管理</a></li>
                        <li><a href="/page/adminTime.jsp" class="active">时间管理</a></li>
                        <li><a href="/page/adminXishu.jsp">系数管理</a></li>
                    </ul>
                </nav>
            </div>
            <div class="adminschool-wrap">
            	<div class="add">
                	<form name="add" action="/course/addTimeModel.do" method="post">
                    	<input type="text" placeholder="添加时间，比如08:45" name="createtime">
                        <input type="submit" class="btn-add" value="添加新时间">
                    </form>
                </div>
                    <form name="adminClass" action="" method="post">
						 <table width="720" border="0" cellspacing="0" cellpadding="0">
						
						</table>

                </form>
            </div>
            <div class="pagebar center" >
               <a href="javascript:checktype(1)" class="current"  >1</a>
              <a href="javascript:checktype(2)">2</a>
               <a href="javascript:checktype(3)">3</a>
             <a href="javascript:checktype(4)">4</a>
               
           </div>
           <!--修改时间-->
           <div class="changeAllWrap hide">
               <div class="changeWrap">
                
                    <form name="changeClass" action="${pageContext.request.contextPath}/course/updateTime.do?id=${v.id}&createtime=${v.createtime}" method="get">
                        <input type="text" name="createtime" >
                        <input type="submit" value="确定修改" class="btn-submit" id="btn-submitClass">
                    
                    </form>
                    <i class="iconfont icon-close"></i>
               </div>
           </div>
            
        </div>
        <aside class="fr">
        	<div id="slidebar" class="fr">
                <div id="teacher-info">
                    <div id="touxiang">
                        <a href="#"><img src="images/touxiang.jpg" alt="管理员头像"></a></div>
                    <h1 class="center">汪帆</h1>
                </div>
                <nav id="teacher-menu">
                    <div id="menulist">
                        <ul>
                            <li><a href="adminIndex.jsp">教师信息管理</a></li>
                            <li><a href="adminSchool.jsp" class="active">教务教学管理</a></li>
                            <li><a href="keshiCount.jsp" >课时统计管理</a></li>
                            <li><a href="adminInfo.jsp">管理员管理</a></li>
                             <li><a href="admindata.jsp">数据备份/恢复</a></li>
                              <li><a href="index.jsp">退出管理系统</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </aside>
	</div>
</main>
<footer id="footer-wrap">
	<div id="footer">
    	<p>课时系统兼容IE9+、谷歌、火狐等现代浏览器，浏览器版本过低会影响用户体验</p>
    	<p>Copyright @2018成都华信智原有限公司版权所有</p>
        <p>课时系统兼容IE8+，以及谷歌、火狐等现代浏览器</p>
        <p>设计+前端开发：赵岚稹
</p>
	<p>后端开发：汪武斌</p>
    </div>
</footer>
<script>
//页面加载完成后立即执行
$(function(){
	checktype(1);
		$(".change").click(function(){
			var $content=$(this).parent().prev().text();
			changePanel($content);
		})
	});
	//分页函数
	function checktype(typeId){
	var url="${pageContext.request.contextPath}/course/selectTimeAll.do";
	var $table=$("table");
	var n=typeId;
	var data={n:n,m:10};
	 $.ajax({
		   type: "POST",
		   url: url,
		   data: data,
		   success: function(msg){
			   var t="";
			   	t=t+'<tr><th scope="col">ID</th>';
				t=t+'<th scope="col">时间</th>';
				t=t+'<th scope="col">操作</th>';
				t=t+"</tr>";
			   $table.empty();
			   
			     $(msg).each(function(k,v){
			    
			    	t=t+"<tr>";
			    	t=t+'<td>'+(k+1)+'</td><td>'+v.createtime+'</td><td>';
			    	t=t+'<a href="#"class="change" >修改</a>&nbsp;'
			    	t=t+'<a href="${pageContext.request.contextPath}/course/deleteTime.do?createtime='+v.createtime+'" onclick="return del()" class="del">删除</a>';	
			    	t=t+"</td></tr>";
			     })
			     $table.append($(t)); 
			    
		   }
	 
		});
	
}	
	//删除上课时间
	function del(){
		if(confirm("确定要删除此上课时间吗？")){
			return true;
		}else{
			return false;
		}
	}
	

</script>
</body>
</html>

<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!doctype html>

<html>
<head>
<meta charset="utf-8">
<title>教师管理-华信智原教师签课时系统</title>
<%@include file="/include/head.jsp" %>

<!--包括IE9以及IE9以下的--> 
<!--[if lte IE 9]>
  <style>
  	.select-wrap:after{
    	display:none;}
    .recordSelect-form select{
    padding:6px 6px 6px 10px;}
     .keshi-form select{
    padding-right:1px;}
  </style>
<![endif]-->

</head>

<body>
<%@include file="/include/header.jsp" %>
<main id="main-wrap">
	<div id="container" class="clearfix neiye">
    	<div id="recordList-wrap" class="fl">
        	<!--选项卡切换菜单-->
        	<div id="recordTitle">
            	<nav>
                	<ul class="clearfix">
                    	<li class="active">个人 课程查看</li>
                    </ul>
                </nav>
            </div>
            <div id="recordList">
            	<!--待审核课时-->
            	<div class="check-wrap record-wrap">
                    <div class="recordSelect clearfix">
                        <div class="recordSelect-form fr">
                            <form name="selectPage" method="post" action="">	
                                <ul class="clearfix">
                                    <li><div class="select-wrap">
                                        <select name="selectPage-count" class="uncheckRecord">	
                                           <option value="10">每页显示10条</option>  
                                           <option value="20">每页显示20条</option>  
                                           <option value="30">每页显示30条</option>  
                                        </select>
                                    </div></li>
                                    <li><div class="select-wrap">
                                        <select name="selectMonth">
                                        <script>
                                        for(var i=1;i<=12;i++){	
                                          document.write(' <option value="'+(i<10?'0'+i:i)+'">'+(i<10?'0'+i:i)+'</option>') 
                                        }
                                           </script>
                                        </select>
                                    </div></li>
                                    <li><div class="select-wrap">
                                        <select name="selectYear">
                                        <script>
                                        var myDate=new Date();
                                        var year=myDate.getFullYear();
                                        for(var i=year;i>=2015;i--){	
                                          document.write(' <option value="'+i+'">'+i+'</option>') 
                                        }
                                           </script>
                                        </select>
                                    </div></li>
                                </ul>
                            </form>
                        </div>
                        <div class="fr recordCount">
                            7月共25条记录，预计<span>180</span>课时，<span>2</span>次值班
                        </div>
                    </div>
                    <div class="recordList-table checkList">
                        <table width="840" border="0" cellspacing="0" cellpadding="0" class="tab">
                                <tr>
                                  <th scope="col">日期</th>
                                  <th scope="col">星期</th>
                                  <th scope="col">时间段</th>
                                  <th scope="col">班级</th>
                                  <th scope="col">地点</th>
                                  <th scope="col">节数</th>
                                  <th scope="col">备注</th>
                                  <th scope="col">操作</th>
                              </tr>
                               
                            </table>
                        <div class="pagebar center" id="page">
                            <a href="#" class="current" value="1">1</a>
                            <a href="#" value="2">2</a>
                            <a href="#" value="3">3</a>
                        </div>
                    </div>
                </div>
                <!--删除课时-->
                <div class="deleted-wrap record-wrap hide">
                    <div class="recordSelect clearfix">
                        <div class="recordSelect-form fr">
                            <form name="selectPage" method="post" action="">	
                                <ul class="clearfix">
                                    <li><div class="select-wrap">
                                        <select name="selectPage-count" >	
                                           <option value="10">每页显示10条</option>  
                                           <option value="20">每页显示20条</option>  
                                           <option value="30">每页显示30条</option>  
                                        </select>
                                    </div></li>
                                    <li><div class="select-wrap">
                                        <select name="selectMonth">
                                        <script>
                                        for(var i=1;i<=12;i++){	
                                          document.write(' <option value="'+(i<10?'0'+i:i)+'">'+(i<10?'0'+i:i)+'</option>') 
                                        }
                                           </script>
                                        </select>
                                    </div></li>
                                    <li><div class="select-wrap">
                                        <select name="" id="">
                                       		 <script>
	                                        	var myDate=new Date();
		                                        var year=myDate.getFullYear();
		                                        for(var i=year;i>=2015;i--){	
		                                          document.write(' <option value="'+i+'">'+i+'</option>') 
		                                        }
                                          	</script>
                                        </select>
                                    </div></li>
                                </ul>
                            </form>
                        </div>
                    </div>
                    <div class="recordList-table checkList">
                    </div>
                </div>
            </div>
            <!--修改课时-->
            <div class="change-wrap record-bg hide">
                    <div class="keshi-form changeRecord">
                        <form name="changekeshi" method="post" action="">
                    <table width="840" border="0" cellspacing="0" cellpadding="10">
                <tr>
                  <th>日期</th>
                  <th>时间段</th>
                  <th>班级</th>
                  <th>地点</th>
                  <th>节数</th>
                  <th>备注</th>
                </tr>
                <tr>
                  <td rowspan="2"><input type="text" id="select-date" name="select-date" class="auto-kal"  data-kal="mode:'multiple',format:'YYYY-MM-DD'" autocomplete="off"></td>
                  <td>
                  <div class="check">
                  <input type="checkbox" id="allday" name="allday" value="allday"><label for="allday" id="allday-label"><span>全天</span></label>
                  </div>
                  </td>
                  <td rowspan="2">
                  <div class="select-wrap">
                  <select id="select-class" name="select-class">
              	<optgroup label="我的班级">
                	<option value="UI1801">UI1801</option>
                </optgroup>
                <optgroup label="全部班级">
                    <option value="UI1802">UI1802</option>
                    <option value="UI1801">UI1801</option>
                    <option value="前端1802">前端1802</option>
                    <option value="大数据精准营销1802">大数据精准营销1802</option>
                </optgroup>
              </select>
                  </div></td>
                  <td rowspan="2">
                  <div class="select-wrap">
                  <select id="classroom" name="classroom">
              	<optgroup label="我的教室">
                	<option>602</option>
                </optgroup>
                <optgroup label="全部教室">
                    <option>601</option>
                    <option>602</option>
                    <option>603</option>
                    <option>604</option>
                    <option>项目部二部</option>
                    <option>701</option>
                    <option>702</option>
                    <option>软件开发二部</option>
                 </optgroup>
              </select>
                  </div>
                  </td>
                  <td rowspan="2">
                  <div class="select-wrap">
                  <select id="count" name="count">
              	<optgroup label="我的课时数">
                	<option>8</option>
                </optgroup>
                <optgroup label="全部课时数">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                </optgroup>
              </select>
                  </div></td>
                  <td>
                  <div class="check">
                  <input type="checkbox" id="zhiban" name="zhiban" value="zhiban"><label for="zhiban"><span>值班</span></label>
                  </div>
                  </td>
                </tr>
                <tr>
                  <td class="center">
                  <div class="select-wrap">
                  <select id="start-time" name="start-time">
                    <option value="08:40">08:40</option>
                    <option value="10:00">10:10</option>
                    <option value="10:20">10:20</option>
                    <option value="11:50">11:50</option>
                  </select></div><span class="splite-time">到</span><div class="select-wrap"><select id="end-time" name="end-time">
                    <option value="13:40">13:40</option>
                    <option value="14:00">14:00</option>
                    <option value="15:00">15:00</option>
                    <option value="16:00">16:00</option>
                    <option value="17:00">17:00</option>
                    <option value="17:30">17:30</option>
                    <option value="18:00">18:00</option>
                    <option value="20:00">20:00</option>
                  </select></div></td>
                  <td><label for="beizhu"><span class="sub-info">其他信息请注明：</span></label><br><input type="text" id="beizhu" name="beizhu"></td>
                </tr>
              </table>
              <div id="submit-wrap" class="center">
                <input type="submit" value="点击确定" class="btn-submit">
              </div>
                </form>
                        </div>
                </div>
            <!--删除课时-->
            <div class="delete-wrap record-bg hide">
                    <div class="deleteRecord center">
                        <form name="delete" method="post" action="">
     						<p>确定删除该课时吗？</p>
                            <input type="submit" id="btn-delete" name="btn-delete" value="确定">
                            <input type="button" id="btn-cancel" value="取消">
     </form>               

                    </div>
                </div>
      	</div>
        <aside class="fr">
        	<div id="slidebar" class="fr">
                <div id="teacher-info">
                    <div id="touxiang">
                        <a href="#"><img src="${pageContext.request.contextPath}${t.url}" alt="教师头像"></a></div>
                    <h1 class="center">${t.loginname}</h1>
                </div>
                <nav id="teacher-menu">
                    <div id="menulist">
                        <ul>
                            <li><a href="/page/teacher.jsp" >实时课时签到</a></li>
                            <li><a href="/page/recordList.jsp" class="active" >课时签到报表</a></li>
                            <li><a href="/page/teacherInfo.jsp" >个人资料设置</a></li>
                           <li><a href="" onclick="teacherExit()" name=teacherExit>退出课时系统</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </aside>
	</div>
</main>
<footer id="footer-wrap">
	<div id="footer">
    	<p>课时系统兼容IE9+、谷歌、火狐等现代浏览器，浏览器版本过低会影响用户体验</p>
    	<p>Copyright @2018成都华信智原有限公司版权所有</p>
        <p>课时系统兼容IE8+，以及谷歌、火狐等现代浏览器</p>
        <p>设计+前端开发：赵岚稹
</p>
	<p>后端开发：汪武斌</p>
    </div>
</footer>
</body>
<script type="text/javascript">

	/* 页面载入事件，查询所有的class_record，返回页面 */
	$(document).ready(function(){
		var $page=$("a[class='current']").text();
		var $pageSize=$("select[name='selectPage-count']").val();
		var $date=new Date();
		var $year=$date.getFullYear();
		var $month=$date.getMonth();
		//设置月份为当前月
		$("select[name='selectMonth']").val($month);
      	//设置年为当前年
    	$("select[name='selectYear']").val($year);
        
		selectPage($page,$pageSize,$year,$month);
		//每页个数发生改变事件
		//匹配所有select，当一个改变，获取其他的所有值
		$("select").change( function() {
			$year=$("select[name='selectYear']").val();
			$month=$("select[name='selectMonth']").val();
			$pageSize=$("select[name='selectPage-count']").val();
		}); 
		
		//页数page
		$("a").click( function() {
			$page=$(this).attr("value");
			selectPage($page,$pageSize,$year,$month);
		}); 
		
		//整个页面改变事件
		$(document).change( function() {
			//alert($year+"年  "+$month+"月 "+$pageSize+" 个数"+year);
			selectPage($page,$pageSize,$year,$month);
		});
	});
	
	//分页查询事件
	function selectPage($page,$pageSize,$year,$month){
		$.get("/class_record/selectpage.do",{ page: $page, pageSize: $pageSize, year: $year,cmonth: $month}, function(data){
			var $tab= $("table[class='tab']");
			$tab.empty();
			$tab.attr({ width: "840", border: "0" ,cellspacing: "0",cellpadding: "0", class: "tab"});
			$tab.append("<tr><th scope='col'>日期</th><th scope='col'>星期</th><th scope='col'>时间段</th><th scope='col'>班级</th><th scope='col'>地点</th><th scope='col'>节数</th><th scope='col'>备注</th> <th scope='col'>操作</th></tr>");
			  for(var i=0;i<data.length;i++){
				var d=data[i];
				$tab.append("<tr><td>"+d.cmonth+"-"+d.day+"</td>"+
				"<td>"+d.timeweek+"</td>"+
				"<td>"+d.begintime+"-"+d.endtime+"</td>"+
				"<td>"+d.classname+"</td>"+
				"<td>"+d.roomname+"</td>"+
				"<td>"+d.sectionnumber+"</td>"+
				"<td>"+d.remark+"</td>"+
				"<td><a href='#' class='change'>修改</a> <a href='#' class='del'>删除</a></td></tr>"); 
				} 
			});
	}
	
	function teacherExit() {
		if(confirm("确认要退出吗？")){
			//alert("选择的是 确定！")
			$("a[name='teacherExit']").attr({ href: "/teacher/exit.do" });
		}else{
			//alert("flase")
		}
		return false;
	}
</script>
</html>

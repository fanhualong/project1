<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%@ taglib prefix="c" 
           uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" 
           uri="http://java.sun.com/jsp/jstl/fmt" %>
<!doctype html>
<html>
<title>教师管理-华信智原教师签课时系统</title>
<%@include file="/include/head.jsp" %>

<!--包括IE9以及IE9以下的--> 
<!--[if lte IE 9]>
  <style>
  	.select-wrap:after{
    	display:none;}
    .keshi-form select{
    padding-right:1px;}
  </style>
<![endif]-->

</head>

<body>
<header>
    <div id="header-wrap">
        <div id="header" class="header-neiye">
            <h1>华信智原教师签课时系统v1.0</h1>
        </div>
    </div>
</header>
<main id="main-wrap">
	<div id="container" class="clearfix neiye">
    	<div id="admin-wrap" class="fl">
            <div class="adminschool-title">
            	<nav>
                	<ul class="clearfix">
                    	<li><a href="/page/adminSchool.jsp" >课程管理</a></li>
                        <li><a href="${pageContext.request.contextPath}/page/adminClass.jsp" class="active"  id="bjgl">班级管理</a></li>
                        <li><a href="/page/adminRoom.jsp">教室管理</a></li>
                        <li><a href="/page/adminTime.jsp">时间管理</a></li>
                        <li><a href="/page/adminXishu.jsp">系数管理</a></li>
                    </ul>
                </nav>
            </div>
            <div class="adminschool-wrap">
            		<!-- 添加新班级 -->
            	<div class="add">
                	<form name="add" action="${pageContext.request.contextPath}/course/addClass.do" method="post">
                    	<input type="text" placeholder="输入新的班级名称" name="tname">
                        <input type="submit" class="btn-add" value="添加新班级">
                    </form>
                </div>
                <!-- 显示班级 -->
                <form name="adminClass" >
                	
					<table width="720" border="0" cellspacing="0" cellpadding="0">
					 
					 
					</table>

                </form>
            </div>
            <!-- 显示分页数 -->
             <div class="pagebar center">
                	 <a href="javascript:checktype(1);" class="current">1</a>
                	 <a href="javascript:checktype(2);" >2</a>
                	 <a href="javascript:checktype(3);" >3</a>
           </div> 
          
      <!--修改班级-->
          <div class="changeAllWrap hide">
               <div class="changeWrap">
                
                    <form name="changeClass" action="" method="post">
                        <input type="text">
                        <input type="submit" value="确定修改" class="btn-submit" id="btn-submitClass">
                    
                    </form>
                    <i class="iconfont icon-close"></i>
               </div>
           </div>
        </div>
        <aside class="fr">
        	<div id="slidebar" class="fr">
                <div id="teacher-info">
                    <div id="touxiang">
                        <a href="#"><img src="images/touxiang.jpg" alt="管理员头像"></a></div>
                    <h1 class="center">汪帆</h1>
                </div>
                <nav id="teacher-menu">
                    <div id="menulist">
                        <ul>
                            <li><a href="${pageContext.request.contextPath}/page/adminIndex.jsp">教师信息管理</a></li>
                            <li><a href="${pageContext.request.contextPath}/page/adminSchool.jsp" class="active">教务教学管理</a></li>
                            <li><a href="${pageContext.request.contextPath}/page/keshiCount.jsp" >课时统计管理</a></li>
                            <li><a href="${pageContext.request.contextPath}/page/adminInfo.jsp">管理员管理</a></li>
                             <li><a href="${pageContext.request.contextPath}/page/admindata.jsp">数据备份/恢复</a></li>
                              <li><a href="${pageContext.request.contextPath}/page/index.jsp">退出管理系统</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </aside>
	</div>
</main>
<footer id="footer-wrap">
	<div id="footer">
    	<p>课时系统兼容IE9+、谷歌、火狐等现代浏览器，浏览器版本过低会影响用户体验</p>
    	<p>Copyright @2018成都华信智原有限公司版权所有</p>
        <p>课时系统兼容IE8+，以及谷歌、火狐等现代浏览器</p>
        <p>设计+前端开发：赵岚稹
</p>
	<p>后端开发：汪武斌</p>
    </div>
</footer>
<script>
$(function(){ 
	checktype(1);
 })
 


function checktype(typeId){
	var url="${pageContext.request.contextPath}/course/selectClassAll.do";
	 var $table=$("table");
	 var data={n:typeId,m:10};
	 $.ajax({
		   type: "POST",
		   url: url,
		   cache: false,
		   async: false,
		   data:data,
		   dataType:"json",
		   success: function(msg){
			   var t="";
			   	t=t+'<tr><th scope="col">ID</th>';
				t=t+'<th scope="col">班级名称</th>';
				t=t+'<th scope="col">操作</th>';
				t=t+"</tr>";
			  
				   $table.empty();
				   //得到前json数组，开始遍历排版
				  
			     $(msg.data).each(function(k,v){
			    
			    	t=t+"<tr>";
			    
			    	t=t+'<td>'+(k+1)+'</td><td>'+v.tname+'</td><td>';
			    	t=t+'<a href="javascript:;"class="change">修改</a>&nbsp;';
			    	t=t+'<a href="${pageContext.request.contextPath}/course/deleteClass.do?tname='+v.tname+'"  onclick="javascript:return del()"class="del">删除</a></td>';	
			    	t=t+"</tr>";
			    	
			    	 
			     })
			     $table.append($(t));
				
					 
		   }
		});
	 
	 
}
	
	
//删除班级

function del(){
	if(confirm("确定删除该班级吗？")){
		return true;
	}else{
		return false;
	}
}
	
//修改班级
$('.change').click(function(){
	var $content=$(this).parent().prev().text();
	changePanel($content);
	})	
	  
	


</script>
</body>
</html>

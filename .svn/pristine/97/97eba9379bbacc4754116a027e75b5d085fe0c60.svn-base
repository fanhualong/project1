<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%@ taglib prefix="c" 
           uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" 
           uri="http://java.sun.com/jsp/jstl/fmt" %>
<!doctype html>
<html>
<%@include file="/include/head.jsp" %>
<body>
<header>
    <div id="header-wrap">
        <div id="header" class="header-neiye">
            <h1>华信智原教师签课时系统v1.0</h1>
        </div>
    </div>
</header>
<main id="main-wrap">
	<div id="container" class="clearfix neiye">
    	<div id="admin-wrap" class="fl">
            <div class="adminschool-title">
            	<nav>
                	<ul class="clearfix">
                    	<li><a href="/page/adminSchool.jsp" class="active">课程管理</a></li>
                        <li><a href="/page/adminClass.jsp">班级管理</a></li>
                        <li><a href="/page/adminRoom.jsp">教室管理</a></li>
                        <li><a href="/page/adminTime.jsp">时间管理</a></li>
                        <li><a href="/page/adminXishu.jsp">系数管理</a></li>
                    </ul>
                </nav>
            </div>
            <div class="adminschool-wrap">
            	<div class="add">
                	<form action="${pageContext.request.contextPath}/course/addCourse.do" method="post">
                    	<input type="text" placeholder="输入新的课程名称" name="tname">
                        <input type="submit" class="btn-add" value="添加新课程">
                    </form>
                </div>
                <form name="adminCourse" >
                	<table width="720" border="0" cellspacing="0" cellpadding="0">
					 
					 
					</table>

                </form>
            </div>
            <div class="pagebar center">
              <a href="javascript:checktype(1);" class="current">1</a>
              <a href="javascript:checktype(2);" >2</a>
              <a href="javascript:checktype(3);" >3</a>
              <a href="javascript:checktype(4);" >4</a>  
           </div>
      	 <!--修改课程-->
           <div class="changeAllWrap hide">
               <div class="changeWrap">
                
                    <form name="changeCourse" action="/course/updateCourse.do" method="post">
                    	<input type="hidden" name="id" />
                        <input type="text" name="tname" />
                        <input type="submit" value="确定修改" class="btn-submit" id="btn-submitCourse">
                    
                    </form>
                    <i class="iconfont icon-close"></i>
               </div>
           </div>
        </div>
        <aside class="fr">
        	<div id="slidebar" class="fr">
                <div id="teacher-info">
                    <div id="touxiang">
                        <a href="#"><img src="images/touxiang.jpg" alt="管理员头像"></a></div>
                    <h1 class="center">汪帆</h1>
                </div>
                <nav id="teacher-menu">
                    <div id="menulist">
                        <ul>
                            <li><a href="/page/adminIndex.jsp">教师信息管理</a></li>
                            <li><a href="/page/adminSchool.jsp" class="active" >教务教学管理</a></li>
                            <li><a href="/page/keshiCount.jsp" >课时统计管理</a></li>
                            <li><a href="/page/adminInfo.jsp">管理员管理</a></li>
                             <li><a href="/page/admindata.jsp">数据备份/恢复</a></li>
                              <li><a href="/page/index.jsp">退出管理系统</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </aside>
	</div>
</main>
<footer id="footer-wrap">
	<div id="footer">
    	<p>课时系统兼容IE9+、谷歌、火狐等现代浏览器，浏览器版本过低会影响用户体验</p>
    	<p>Copyright @2018成都华信智原有限公司版权所有</p>
        <p>课时系统兼容IE8+，以及谷歌、火狐等现代浏览器</p>
        <p>设计+前端开发：赵岚稹
</p>
	<p>后端开发：汪武斌</p>
    </div>
</footer>
<script>
//页面加载完成后立即执行

 $(function(){	

	 
	 checktype(1);
	//修改课程
		$('.change').click(function(){
			var $content1=$(this).parent().prev().prev().text();
			var $content2=$(this).parent().prev().text();
			changePanel($content1,$content2);
			});
		
	
 });
 function checktype(typeId){
	 
	 var url="${pageContext.request.contextPath}/course/selectCourseAll.do";
	 var $table=$("table");
	 var data={n:typeId,m:10};
	 $.ajax({
		   type: "POST",
		   url: url,
		   data:data,
		   cache: false,
		   async: false,
		   dataType:"json",
		   success: function(msg){
			   var t="";
			   	t=t+'<tr><th scope="col">ID</th>';
				t=t+'<th scope="col">课程名称</th>';
				t=t+'<th scope="col">操作</th>';
				t=t+"</tr>";
				
			   $table.empty();
		     	$(msg).each(function(k,v){
		    	t=t+"<tr>";
		    	t=t+'<td>'+(v.id)+'</td><td>'+v.tname+'</td>';
		    	t=t+'<td><a href="javascript:;"  class="change">修改</a>&nbsp;'; 
		    	t=t+'<a href="${pageContext.request.contextPath}/course/deleteCourse.do?tname='+v.tname+'" onclick="javascript:return del()" class="del">删除</a></td>';	
		    	t=t+"</tr>";
 
		     })
		     $table.append($(t));
		   }
		});
	
 }

 	//删除课程
	function del(){
		if(confirm("确定本删除课程？")){
			return true;
		}else{
			return false;
		}
	}
	
</script>
</body>
</html>
